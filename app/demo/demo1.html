<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>


  <link rel="stylesheet" href="css/common.css">
  <link rel="stylesheet" href="css/style.css">

</head>
<body>
  <div class="code">
    <p>通过地区名称初始化设置，并且下拉框值为地区名称</p>
    <p>$('#demo3').citys({type: 'name',province: '四川省',city: '成都市',area: '武侯区'});</p>



    <div class="citys mb20" id="demo3">
      <select class="city-select" name="province"></select>
      <select class="city-select" name="city"  onchange="oncityChange()" id="city"></select>
      <select class="city-select" name="town" id="town">
         <option value="-1">请选择</option>
      </select>
    </div>
  </div>

  <button id="btn">大按钮</button>

  <script src="js/jquery-1.11.3.js"></script>
<script src="js/jquery-citys.js"></script>
<script>
  $(function(){
    $('#demo3').citys({
      type: 'code',
      province: '310000',
      city: '',
      area: ''
    });
    
  })

  //城市选择切换
  function oncityChange()
  {
    var  cityCode=$("#city").val(); 
    alert($("#city").find("option:selected").text());
    $.ajax({
    		url:'https://passer-by.com/data_location/code/'+cityCode+'.json',
    		dataType:'json',
    		success:function(town){
          $("#town").empty();//首先清空数据	
    			for(i in town){
    					$("#town").append('<option value="'+i+'">'+town[i]+'</option>');
    			}
    		}
    	});
    
  }

  $("#btn").click(function(){

    alert($("#city").find("option:selected").text());
    alert($("#town").find("option:selected").text());
  });
</script>
</body>
</html>